(()=>{"use strict";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};((e,t,i)=>{i.r(t);const n=require("electron"),s=require("path"),o=require("fs"),a=require("child_process"),r={publicInfo:"https://verzsut.github.io/sxmle_updater/public.json",downloadPage:"https://verzsut.github.io/SnowRunner-XML-Editor-Desktop/download.html",updateFiles:"https://verzsut.github.io/sxmle_updater/files",updateMap:"https://verzsut.github.io/sxmle_updater/updateMap.json",root:(0,s.join)(__dirname,"..",".."),config:`${__dirname}SXMLE\\config.json`.replace("SXMLE",""),backupFolder:`${__dirname}\\backups`,icon:`${__dirname}\\favicon.ico`,backupInitial:`${__dirname}\\backups\\initial.pak`,translations:(0,s.normalize)(`${__dirname}SXMLE\\translations`.replace("SXMLE","")),winrar:`${__dirname}\\winrar`,mainTemp:`${__dirname}\\mainTemp`,modsTemp:`${__dirname}\\modsTemp`,strings:`${__dirname}\\mainTemp\\[strings]`,dlc:`${__dirname}\\mainTemp\\[media]\\_dlc`,classes:`${__dirname}\\mainTemp\\[media]\\classes`};function E(e){const t={},i=e.match(/[^\r\n]+/g);if(i)for(const e of i){const i=e.match(/(.*?)[\s\t]*(\".*?\")/);if(i&&3===i.length){const e=i[1].replaceAll('"',"").replaceAll("'","").replaceAll("\ufeff","");try{const n=JSON.parse(i[2].replaceAll("\\",""));t[e]=n}catch{console.log(i)}}}return t}function l(e,t,i=".xml",n){if(!(0,o.existsSync)(e))return[];let a=[];const r=(0,o.readdirSync)(e);for(let E=0;E<r.length;E++){const c=(0,s.join)(e,r[E]),_=(0,o.lstatSync)(c);if(t){if(!_.isDirectory())continue;a.push({name:r[E],path:c})}_.isDirectory()&&n?a=[...a,...l(c,!1,i,!0)]:r[E].indexOf(i)>=0&&a.push({name:r[E].replace(i,""),path:c})}return a}function c(){if((0,o.existsSync)(r.backupInitial))try{(0,o.unlinkSync)(r.backupInitial)}catch{}(0,o.existsSync)(r.mainTemp)&&((0,o.rmSync)(r.mainTemp,{recursive:!0}),(0,o.mkdirSync)(r.mainTemp)),(0,o.existsSync)(r.modsTemp)&&((0,o.rmSync)(r.modsTemp,{recursive:!0}),(0,o.mkdirSync)(r.modsTemp))}function _(e){const t=(0,s.dirname)(e),i=(0,s.dirname)(t);(0,o.existsSync)(i)||_(t),(0,o.existsSync)(t)||(0,o.mkdirSync)(t)}var d,p,h;!function(e){e.openSettings="openSettings",e.resetConfig="resetConfig",e.devTools="devTools",e.reload="reload",e.quitApp="quitApp",e.showFolder="showFolder",e.separator="separator",e.saveBackup="saveBackup",e.recoverFromBackup="recoverFromBackup",e.joinEPF="joinEPF",e.seeEPF="seeEPF",e.openURL="openURL"}(d||(d={})),function(e){e.dev="dev",e.prod="prod"}(p||(p={})),function(e){e.RU="RU",e.EN="EN",e.DE="DE"}(h||(h={}));class T{static obj=function(){const e=(0,o.readFileSync)(r.config);return JSON.parse(e.toString())}();static save=()=>{try{(0,o.writeFileSync)(r.config,JSON.stringify(this.obj,null,"\t"))}catch{throw new Error("SAVE_CONFIG_ERROR")}};static reset=e=>{this.obj.paths={initial:null,dlc:null,classes:null,mods:null},this.obj.dlcList=[],this.obj.modsList={length:0},this.obj.ADV={},this.obj.ETR={},this.obj.settings={updates:!0,limits:!0,DLC:!0,mods:!0,resetButton:!1,devMode:!1},this.obj.sums={initial:null,mods:{}},this.obj.lang=h.EN,c(),e?this.save():(n.app.relaunch(),n.app.quit())};static export=()=>{(0,o.existsSync)(r.backupFolder)&&(0,o.writeFileSync)(`${r.backupFolder}\\config.json`,JSON.stringify(this.obj))}}const S=JSON.parse('{"ADDONS_CATEGORY_TITLE":"Аддоны","ADMIN_REQUIRED_MESSAGE":"Ошибка запуска. Программа должна быть запущена от имени администратора.","ALLOW_NEW_VERSION":"Доступна новая версия программы. Нажмите чтобы перейти на страницу скачивания.","ALLOW_NEW_VERSION_AUTO":"Доступна новая версия программы","AUTO_INITIAL_TITLE":"Автоматичекий выбор initial.pak работает только в версии от Epic Games.","BACKUP_ERROR":"Не удалось сохранить бэкап.","BACKUP_MENU_LABEL":"Бэкап","BREAK_IMPORT_INVALID_NAME":"Невозможно импортировать параметры. Не найдены параметры для файла %file.","BY_DEFAULT":"По умолчанию","CARGO_CATEGORY_TITLE":"Грузы","CLASSES_NOT_FOUND":"Папка classes не найдена.","CLOSE":"Закрыть","DELETE_CURRENT_INITIAL_BACKUP_ERROR":"Не удалось удалить текущий бэкап initial.pak","DELETE_OLD_INITIAL_BACKUP_ERROR":"Не удалось удалить старый бэкап initial.pak.","DEV_MODE_LABEL":"Разработчик","DISABLE_EDITOR_LABEL_LABEL":"Не вставлять подпись","DLC_FOLDER_NOT_FOUND":"Папка с дополнениями не найдена","DLC_LABEL":"DLC","DLC_LIST_TITLE":"Дополнения","DLC_MENU_ITEM_LABEL":"Дополнения","EDIT_FILE_BUTTON":"Редактировать","EMPTY":"Пусто","EMPTY_FOLDER_ERROR":"Вы не выбрали папку!","ENGINES_CATEGORY_TITLE":"Двигатели","ERROR":"Ошибка","EXIT_MENU_ITEM_LABEL":"Выход","EXPORT":"Экспорт","EPF_MENU_LABEL":"EPF","FILE_IS_RESETED":"Параметры были сброшены.","FILE_MENU_LABEL":"Файл","FIRST_STEPS_DESCRIPTION":"Первоначальная настройка.","GAME_FOLDER_LABEL":"Папка с игрой","GEARBOXES_CATEGORY_TITLE":"Коробки передач","HELP_MENU_LABEL":"Помощь","HOW_TO_USE_TITLE":"Как пользоваться","IGNORE":"Игнорировать","IMPORT":"Импорт","IN_PROGRESS":"В процессе","INITIAL_LABEL":"Путь к initial.pak","INITIAL_NOT_FOUND":"initial.pak не найден.","INVALID_FOLDER_ERROR":"Вы выбрали неправильную папку. Попробуйте вручную выбрать initial.pak","INVALID_INITIAL_ERROR":"Выбран неверный initial.pak","INVALID_MODS_ALERT_MAIN":"Не удалось загрузить модификацию","INVALID_MODS_ALERT_NOT_EXISTS":"Файл модификации отсутствует. Возможно он был удалён или перенесён.","INVALID_MODS_ALERT_NO_CLASSES":"Отсутствует папка classes. Возможно вы выбрали не тот .pak модификации.","INVALID_MODS_ALERT_NO_PERMISSION":"Нет доступа к чтению или записи файла. Проверьте свойство \'только для чтения\' у файла.","JOIN_EXPORTED_FILES":"Объединить","LANGUAGE_MENU_ITEM_LABEL":"Язык","LIMITS_LABEL":"Ограничения","LIST_TITLE":"Выберите для редактирования","LOADING":"Загрузка","MAIN_LIST_TITLE":"Основное","MANUAL_INITIAL":"Ручной выбор initial.pak","MODS_ADD_BUTTON":"Добавить","MODS_FOLDER_NOT_EXISTED":"Не найдена папка с модами","MODS_LABEL":"Модификации","MODS_LIST_TITLE":"Модификации","NOTIFICATION":"Уведомление","NO_GAME_FOLDER":"Выбор папки с игрой обязателен!","ONLY_DEVELOPER_EDIT_TEXT":"Только в режиме разработчика","OPEN_BUTTON":"Открыть","OPEN_INITIAL_BUTTON":"Открыть папку с initial.pak","OPEN_WINDOW_ERROR":"Не удалось открыть окно.","PARAMS_FILE_NOT_FOUND":"Файл для импорта не выбран.","PARSE_FILE_ERROR":"Файл не может быть распознан","PATHS_MENU_ITEM_LABEL":"Пути","PATH_TO_SAVE_NOT_FOUND":"Не указан путь для экспорта.","READ_FILE_ERROR":"Не удалось считать файл по пути.","RECOGNIZE_ERROR":"Ошибка распознания файла","RELAUNCH_PROMPT":"Для загрузки мода необходима перезагрузка программы. Выполнить перезагрузку?","RESET_BUTTON_LABEL":"Кнопка сброса","RESET_CONFIRM_MESSAGE":"Вы действительно хотите сбросить все параметры до исходных?","RESET_MENU_ITEM_LABEL":"Сбросить","RESTORE_MENU_ITEM_LABEL":"Восстановить","SAVE_BUTTON":"Сохранить","SAVE_CONFIG_ERROR":"Не удалось сохранить конфиг.","SAVE_INITIAL_BACKUP_ERROR":"Не удалось сделать бэкап initial.pak.","SAVE_MOD_ERROR":"Не удалось сохранить файлы модификации. Нет доступа к записи файла.","SAVE_ORIGINAL_ERROR":"Не удалось обновить файлы в initial.pak. Нет доступа к записи","SAVING_MESSAGE":"Сохранение...","SEARCH":"Поиск","SEE_EXPORTED_MESSAGE":"В данном файле находятся параметры следующих файлов:","SEE_EXPORTED_FILE":"Просмотр","SELECT_GROUP":"Выберите группу","SETTINGS_MENU_ITEM_LABEL":"Настройки","SUCCESS":"Успех","SUCCESS_JOIN":"Следующие файлы были объединены в один:","SUCCESS_BACKUP_SAVE":"Бэкап initial.pak успешно сохранён.","SUCCESS_INITIAL_RESTORE":"initial.pak был успешно восстановлен.","SUSPENSIONS_CATEGORY_TITLE":"Подвески","TRAILERS_CATEGORY_TITLE":"Прицепы","TRUCKS_CATEGORY_TITLE":"Автомобили","UNDEFINED_LIST_TYPE":"Неправильный тип листа. Тип не является одним из [trucks, trailers, cargo].","UNPACKING":"Распаковка","UPDATE":"Обновить","UPDATES_LABEL":"Обновления","WAS_EXPORTED":"Параметры экспортированы.","WAS_IMPORTED":"Параметры импортированы. Не забудьте сохранить изменения!","WHEELS_CATEGORY_TITLE":"Колёса","WINCHES_CATEGORY_TITLE":"Лебёдки","WRITE_FILE_ERROR":"Не удалось записать в файл."}'),u=JSON.parse('{"ADDONS_CATEGORY_TITLE":"Addons","ADMIN_REQUIRED_MESSAGE":"Startup error. The program must be run as an administrator.","ALLOW_NEW_VERSION":"A new version of the program is available. Click to go to the download page.","ALLOW_NEW_VERSION_AUTO":"A new version of the program is available","AUTO_INITIAL_TITLE":"The automatic selection of initial.pak only works in the version from Epic Games.","BACKUP_ERROR":"Failed to save backup.","BACKUP_MENU_LABEL":"Backup","BREAK_IMPORT_INVALID_NAME":"Parameters cannot be imported. No parameters found for %file.","BY_DEFAULT":"Default","CARGO_CATEGORY_TITLE":"Cargo","CLASSES_NOT_FOUND":"Папка classes not found","CLOSE":"Close","DELETE_CURRENT_INITIAL_BACKUP_ERROR":"Failed to delete the current initial backup.","DELETE_OLD_INITIAL_BACKUP_ERROR":"Failed to delete the old initial backup.","DEV_MODE_LABEL":"Developer","DISABLE_EDITOR_LABEL_LABEL":"Do not insert signature","DLC_FOLDER_NOT_FOUND":"DLC folder not found","DLC_LABEL":"DLC","DLC_LIST_TITLE":"DLC","DLC_MENU_ITEM_LABEL":"DLC","EDIT_FILE_BUTTON":"Edit","EMPTY":"Empty","EMPTY_FOLDER_ERROR":"You didn\\"t select a folder!","ENGINES_CATEGORY_TITLE":"Engines","ERROR":"Error","EXIT_MENU_ITEM_LABEL":"Exit","EXPORT":"Export","EPF_MENU_LABEL":"EPF","FILE_IS_RESETED":"The parameters were reset.","FILE_MENU_LABEL":"File","FIRST_STEPS_DESCRIPTION":"Initial setup of the program.","GAME_FOLDER_LABEL":"Game folder","GEARBOXES_CATEGORY_TITLE":"Gearboxes","HELP_MENU_LABEL":"Help","HOW_TO_USE_TITLE":"How to use","IGNORE":"Ignore","IMPORT":"Import","IN_PROGRESS":"In progress","INITIAL_LABEL":"Path to initial.pak","INITIAL_NOT_FOUND":"initial.pak not found","INVALID_FOLDER_ERROR":"You have selected the wrong folder!","INVALID_INITIAL_ERROR":"Invalid initial.pak selected","INVALID_MODS_ALERT_MAIN":"Failed to load the modification","INVALID_MODS_ALERT_NOT_EXISTS":"The modification file is missing. It may have been deleted or moved.","INVALID_MODS_ALERT_NO_CLASSES":"The classes folder is missing. You may have chosen the wrong one .pak modifications.","INVALID_MODS_ALERT_NO_PERMISSION":"There is no access to read or write the file. Check the \'read-only\' property of the file.","JOIN_EXPORTED_FILES":"Join","LANGUAGE_MENU_ITEM_LABEL":"Language","LIMITS_LABEL":"Restrictions","LIST_TITLE":"Select to edit","LOADING":"Loading","MAIN_LIST_TITLE":"Main","MANUAL_INITIAL":"Manual selection of initial.pak","MODS_ADD_BUTTON":"Add","MODS_FOLDER_NOT_EXISTED":"Mod folder not found","MODS_LABEL":"Mods","MODS_LIST_TITLE":"Mods","NOTIFICATION":"Notification","NO_GAME_FOLDER":"The choice of the folder with the game is required!","ONLY_DEVELOPER_EDIT_TEXT":"Edit only in developer mode","OPEN_BUTTON":"Open","OPEN_INITIAL_BUTTON":"Open a folder with initial.pak","OPEN_WINDOW_ERROR":"The window could not be opened.","PARAMS_FILE_NOT_FOUND":"The file for import is not selected.","PARSE_FILE_ERROR":"The file cannot be recognized","PATHS_MENU_ITEM_LABEL":"Paths","PATH_TO_SAVE_NOT_FOUND":"The export path is not specified.","READ_FILE_ERROR":"Could not read the file on the path.","RECOGNIZE_ERROR":"File recognition error","RELAUNCH_PROMPT":"To add the mod, you need to restart the program. Perform a reboot?","RESET_BUTTON_LABEL":"Reset button","RESET_CONFIRM_MESSAGE":"Do you really want to reset all the parameters to the original ones?","RESET_MENU_ITEM_LABEL":"Reset","RESTORE_MENU_ITEM_LABEL":"Restore","SAVE_BUTTON":"Save","SAVE_CONFIG_ERROR":"Failed to save the config.","SAVE_INITIAL_BACKUP_ERROR":"Failed to save initial backup.","SAVE_MOD_ERROR":"The modification files could not be saved. There is no write access to the file.","SAVE_ORIGINAL_ERROR":"Failed to update files in initial. pak. There is no access to the record","SAVING_MESSAGE":"Saving...","SEARCH":"Search","SEE_EXPORTED_MESSAGE":"This file contains the parameters of the following files:","SEE_EXPORTED_FILE":"Browse","SELECT_GROUP":"Choose group","SETTINGS_MENU_ITEM_LABEL":"Settings","SUCCESS":"Success","SUCCESS_JOIN":"The following files have been merged into one:","SUCCESS_BACKUP_SAVE":"The initial.pak backup was saved successfully.","SUCCESS_INITIAL_RESTORE":"initial.pak was successfully restored.","SUSPENSIONS_CATEGORY_TITLE":"Suspensions","TRAILERS_CATEGORY_TITLE":"Trailers","TRUCKS_CATEGORY_TITLE":"Trucks","UNDEFINED_LIST_TYPE":"Incorrect sheet type. The type is not one of [trucks, trailers, cargo].","UNPACKING":"Unpacking","UPDATE":"Update","UPDATES_LABEL":"Updates","WAS_EXPORTED":"The parameters are exported.","WAS_IMPORTED":"The parameters are imported. Don\'t forget to save the changes!","WHEELS_CATEGORY_TITLE":"Wheels","WINCHES_CATEGORY_TITLE":"Winches","WRITE_FILE_ERROR":"Could not write to file."}'),I=JSON.parse('{"ADDONS_CATEGORY_TITLE":"Addons","ADMIN_REQUIRED_MESSAGE":"Startfehler. Das Programm muss als administrator ausgeführt.","ALLOW_NEW_VERSION":"Eine neue Version des Programms ist verfügbar. Klicken Sie hier, um zur Download-Seite zu gelangen.","ALLOW_NEW_VERSION_AUTO":"Eine neue Version des Programms ist verfügbar","AUTO_INITIAL_TITLE":"Automatische Auswahl initial.pak funktioniert nur in der Version von Epic Games.","BACKUP_ERROR":"Die Sicherung konnte nicht gespeichert werden.","BACKUP_MENU_LABEL":"Sicherung","BREAK_IMPORT_INVALID_NAME":"Parameter können nicht importiert werden. Keine Optionen für die Datei %file gefunden.","BY_DEFAULT":"Standard","CARGO_CATEGORY_TITLE":"Güter","CLASSES_NOT_FOUND":"Klassen nicht gefunden","CLOSE":"Schließen","DELETE_CURRENT_INITIAL_BACKUP_ERROR":"Die aktuelle Erstsicherung konnte nicht gelöscht werden.","DELETE_OLD_INITIAL_BACKUP_ERROR":"Die alte Erstsicherung konnte nicht gelöscht werden.","DEV_MODE_LABEL":"Entwickler","DISABLE_EDITOR_LABEL_LABEL":"Signatur nicht einfügen","DLC_FOLDER_NOT_FOUND":"DLC-Ordner nicht gefunden","DLC_LABEL":"Addenda","DLC_LIST_TITLE":"Addenda","DLC_MENU_ITEM_LABEL":"DLC","EDIT_FILE_BUTTON":"Bearbeiten","EMPTY":"Leer","EMPTY_FOLDER_ERROR":"Sie haben keinen Ordner ausgewählt!","ENGINES_CATEGORY_TITLE":"Motoren","ERROR":"Fehler","EXIT_MENU_ITEM_LABEL":"Exit","EXPORT":"Export","EPF_MENU_LABEL":"EPF","FILE_IS_RESETED":"Die Einstellungen wurden zurückgesetzt.","FILE_MENU_LABEL":"Datei","FIRST_STEPS_DESCRIPTION":"Ersteinrichtung des Programms.","GAME_FOLDER_LABEL":"Spiel-Ordner","GEARBOXES_CATEGORY_TITLE":"Getriebe","HELP_MENU_LABEL":"Hilfe","HOW_TO_USE_TITLE":"Wie benutzt man","IGNORE":"Ignorieren","IMPORT":"Import","IN_PROGRESS":"In progress","INITIAL_LABEL":"Pfad zu initial.pak","INITIAL_NOT_FOUND":"initial.pak nicht gefunden","INVALID_FOLDER_ERROR":"Sie haben den falschen Ordner ausgewählt!","INVALID_INITIAL_ERROR":"Ungültiger initial ausgewählt.pak","INVALID_MODS_ALERT_MAIN":"Die Änderung konnte nicht geladen werden","INVALID_MODS_ALERT_NOT_EXISTS":"Die Änderungsdatei fehlt. Möglicherweise wurde es gelöscht oder verschoben.","INVALID_MODS_ALERT_NO_CLASSES":"Der Ordner classes fehlt. Vielleicht haben Sie den falschen gewählt .pak Änderung.","INVALID_MODS_ALERT_NO_PERMISSION":"Kein Zugriff auf das Lesen oder Schreiben der Datei. Überprüfen Sie die schreibgeschützte Eigenschaft der Datei.","JOIN_EXPORTED_FILES":"Vereinigen","LANGUAGE_MENU_ITEM_LABEL":"Sprache","LIMITS_LABEL":"Beschränkungen","LIST_TITLE":"Wählen Sie zum Bearbeiten","LOADING":"Herunterladen","MAIN_LIST_TITLE":"Original","MANUAL_INITIAL":"Manuelle Auswahl von initial.pak","MODS_ADD_BUTTON":"Hinzufügen","MODS_FOLDER_NOT_EXISTED":"Ordner mit Mods nicht gefunden","MODS_LABEL":"Modifikationen","MODS_LIST_TITLE":"Modifikationen","NOTIFICATION":"Norifizierung","NO_GAME_FOLDER":"Die Auswahl des Ordners mit dem Spiel ist obligatorisch!","ONLY_DEVELOPER_EDIT_TEXT":"Nur im Entwicklermodus bearbeiten","OPEN_BUTTON":"Öffnen","OPEN_INITIAL_BUTTON":"Öffnen Sie einen Ordner mit initial.pak","OPEN_WINDOW_ERROR":"Das Fenster konnte nicht geöffnet werden.","PARAMS_FILE_NOT_FOUND":"Die zu importierende Datei ist nicht ausgewählt.","PARSE_FILE_ERROR":"Datei kann nicht erkannt werden","PATHS_MENU_ITEM_LABEL":"Pfade","PATH_TO_SAVE_NOT_FOUND":"Es wurde kein Exportpfad angegeben.","READ_FILE_ERROR":"Die Datei konnte nicht im Pfad gelesen werden.","RECOGNIZE_ERROR":"Fehler bei der Dateierkennung","RELAUNCH_PROMPT":"Um den Mod zu laden, müssen Sie das Programm neu starten. Einen Neustart durchführen?","RESET_BUTTON_LABEL":"Reset-Taste","RESET_CONFIRM_MESSAGE":"Möchten Sie wirklich alle Einstellungen auf die ursprünglichen zurücksetzen?","RESET_MENU_ITEM_LABEL":"Zurücksetzen","RESTORE_MENU_ITEM_LABEL":"Standard Wiederherstellen","SAVE_BUTTON":"Datei","SAVE_CONFIG_ERROR":"Die Konfiguration konnte nicht gespeichert werden.","SAVE_INITIAL_BACKUP_ERROR":"Erste Sicherung konnte nicht gespeichert werden.","SAVE_MOD_ERROR":"Die Änderungsdateien konnten nicht gespeichert werden. Sie haben keinen Zugriff auf das Schreiben der Datei.","SAVE_ORIGINAL_ERROR":"Die Dateien in initial konnten nicht aktualisiert werden.pak. Kein Zugriff auf den Datensatz","SAVING_MESSAGE":"Speichern...","SEARCH":"Suche","SEE_EXPORTED_MESSAGE":"Diese Datei enthält die Einstellungen der folgenden Dateien:","SEE_EXPORTED_FILE":"Durchsehen","SELECT_GROUP":"Gruppe Wählen","SETTINGS_MENU_ITEM_LABEL":"Einstellungen","SUCCESS":"Erfolg","SUCCESS_JOIN":"Die folgenden Dateien wurden zu einem zusammengefasst:","SUCCESS_BACKUP_SAVE":"Die Initiale.pak backup wurde erfolgreich gespeichert.","SUCCESS_INITIAL_RESTORE":"initial.pak wurde erfolgreich restauriert.","SUSPENSIONS_CATEGORY_TITLE":"Suspensionen","TRAILERS_CATEGORY_TITLE":"Nutzfahrzeuge","TRUCKS_CATEGORY_TITLE":"Autos","UNDEFINED_LIST_TYPE":"Ungültiger Blatttyp. Der Typ ist nicht einer von [trucks, trailers, cargo].","UNPACKING":"Auspacken","UPDATE":"Aktualisieren","UPDATES_LABEL":"Updates","WAS_EXPORTED":"Die Einstellungen wurden exportiert.","WAS_IMPORTED":"Einstellungen importiert. Vergessen Sie nicht, die Änderungen zu speichern!","WHEELS_CATEGORY_TITLE":"Räder","WINCHES_CATEGORY_TITLE":"Winden","WRITE_FILE_ERROR":"Fehler beim Schreiben in die Datei."}');class L{static config=T.obj;static obj={RU:S,EN:u,DE:I,mods:{},ingame:{}};static addIngame=()=>new Promise((e=>{let t;if((0,o.existsSync)(r.strings)){let i;switch(this.config.lang){case h.RU:i="strings_russian.str";break;case h.EN:i="strings_english.str";break;case h.DE:i="strings_german.str"}const n=(0,s.join)(r.strings,i);(0,o.existsSync)(n)?(t=E((0,o.readFileSync)(n,{encoding:"utf16le"}).toString()),this.obj.ingame=t,e(null)):e(null)}else e(null)}));static addFromMods=()=>new Promise((e=>{const t={};for(const e in this.config.modsList)if((0,o.existsSync)((0,s.join)(r.modsTemp,e,"texts"))){let i;switch(this.config.lang){case h.RU:i="strings_russian.str";break;case h.EN:i="strings_english.str";break;case h.DE:i="strings_german.str"}const n=(0,s.join)(r.modsTemp,e,"texts",i);if((0,o.existsSync)(n)){const i=E((0,o.readFileSync)(n,{encoding:"utf16le"}).toString());t[e]=i}}this.obj.mods=t,e(null)}));static get=(e,t=!0)=>{const i=this.obj[this.config.lang];if(i)return i[e]||(t?e:void 0)}}class g{static obj={}}class R{static categories;static list;static editor;static loading;static currentWindow;static settings=g.obj;static createArgs={editor:{path:`file://${require("path").resolve(__dirname,"..","renderer","editor","index.html")}`,preload:require("path").resolve(__dirname,"../renderer","editor","preload.js"),width:1e3,height:800},updateWindow:{path:`file://${require("path").resolve(__dirname,"..","renderer","update","index.html")}`,preload:require("path").resolve(__dirname,"../renderer","categories","preload.js"),width:400,height:200,frame:!1,modal:!0,resizable:!1},settings:{path:`file://${require("path").resolve(__dirname,"..","renderer","settings","index.html")}`,preload:require("path").resolve(__dirname,"../renderer","settings","preload.js"),width:400,height:550,modal:!0},console:{path:`file://${require("path").resolve(__dirname,"..","renderer","console","index.html")}`,preload:require("path").resolve(__dirname,"../renderer","console","preload.js"),width:500,height:500},loading:{path:`file://${require("path").resolve(__dirname,"..","renderer","loading","index.html")}`,preload:require("path").resolve(__dirname,"../renderer","loading","preload.js"),width:230,height:100,frame:!1},setup:{path:`file://${require("path").resolve(__dirname,"..","renderer","setup","index.html")}`,preload:require("path").resolve(__dirname,"../renderer","setup","preload.js"),width:550,height:500},main:{path:`file://${require("path").resolve(__dirname,"..","renderer","categories","index.html")}`,preload:require("path").resolve(__dirname,"../renderer","categories","preload.js"),width:980,height:380,resizable:!1},list:{path:`file://${require("path").resolve(__dirname,"..","renderer","list","index.html")}`,preload:require("path").resolve(__dirname,"../renderer","list","preload.js"),width:1100,height:640}};static openEditor=e=>{this.editor&&!e&&this.editor.hide();const t=this.createWindow({...this.createArgs.editor,bridge:e});this.list&&this.list.close(),e?n.ipcMain.once("bridge-channel",((e,t)=>{this.editor&&this.editor.webContents.send("bridge-channel",t)})):this.editor?t.once("close",(()=>{this.editor&&!this.editor.isDestroyed()&&(this.currentWindow=this.editor,this.editor.show(),this.editor.focus())})):(this.editor=t,t.once("close",(()=>{this.openList(),delete this.editor})))};static openUpdateWindow=e=>{const t=this.currentWindow,i=this.createWindow({...this.createArgs.updateWindow,parent:this.currentWindow});return i.once("show",(()=>{i.webContents.postMessage("content",e)})),i.once("close",(()=>{this.currentWindow=t,t.focus()})),i};static openSettings=()=>{const e=this.currentWindow;this.createWindow({...this.createArgs.settings,parent:this.currentWindow}).once("close",(()=>{this.currentWindow=e,e.focus()}))};static openConsole=()=>{const e=this.currentWindow;this.createWindow(this.createArgs.console).once("close",(()=>{this.currentWindow=e,e.focus()}))};static openLoading=e=>{const t=this.currentWindow,i=this.createWindow({...this.createArgs.loading,modal:!e,parent:e?null:this.currentWindow});return e||i.once("close",(()=>{this.currentWindow=t,t.focus()})),i.setText=e=>i.webContents.postMessage("fileName",e),i.setCount=e=>i.webContents.postMessage("count",e),i.setPercent=e=>i.webContents.postMessage("percent",e),i.success=()=>i.webContents.postMessage("success",!0),i.download=()=>i.webContents.postMessage("download",!0),i};static openSetup=()=>{const e=this.createWindow(this.createArgs.setup);return e.once("show",(()=>{this.loading.isDestroyed()||this.loading.close()})),e.once("close",(()=>{n.app.quit()})),e};static openCategories=()=>new Promise((e=>{this.categories=this.createWindow(this.createArgs.main),this.categories.once("show",(()=>{e(null),this.loading.isDestroyed()||this.loading.close()})),this.categories.once("close",(()=>{this.currentWindow===this.categories?n.app.quit():delete this.categories}))}));static openList=()=>{this.list=this.createWindow(this.createArgs.list),this.categories&&this.categories.close(),this.list.once("close",(()=>{this.currentWindow===this.list&&this.openCategories(),delete this.list}))};static createWindow=e=>{const t=new n.BrowserWindow({width:e.width??800,height:e.height??600,resizable:e.resizable??!0,icon:r.icon,show:e.show??!1,parent:e.parent??null,modal:e.modal??!1,frame:!(!1===e.frame),paintWhenInitiallyHidden:!1,webPreferences:{preload:e.preload,contextIsolation:!1}});return t.setMenu(null),e.bridge?t.loadURL(e.path):(this.currentWindow=t,t.loadURL(e.path).then((()=>{t&&!t.isDestroyed()&&(t.show(),t.focus(),this.settings.devTools&&t.webContents.toggleDevTools())}))),t}}class O{static config=T.obj;static update=(e,t)=>{(0,a.execSync)(`WinRAR f -ibck -inul "${t}" "${e}\\" -r -ep1`,{cwd:r.winrar})};static unpack=(e,t,i)=>new Promise((n=>{(0,a.exec)(`WinRAR x -ibck -inul "${e}" @${i?"unpack-mod-list.lst":"unpack-list.lst"} "${t}\\"`,{cwd:r.winrar}).once("close",(()=>{n(null)}))}));static unpackMain=e=>new Promise((t=>{const i=R.openLoading(e);i.once("show",(()=>{i.setText(L.get("UNPACKING"))})),(0,o.existsSync)(r.mainTemp)&&(0,o.rmSync)(r.mainTemp,{recursive:!0}),(0,o.mkdirSync)(r.mainTemp),this.unpack(this.config.paths.initial,r.mainTemp).then((()=>{t(null),i.isDestroyed()||i.close()}))}));static unpackMod=e=>new Promise(((t,i)=>{const n=(0,s.join)(r.modsTemp,(0,s.basename)(e,".pak"));try{(0,o.existsSync)(r.modsTemp)||(0,o.mkdirSync)(r.modsTemp),(0,o.existsSync)(n)&&(0,o.rmSync)(n,{recursive:!0}),(0,o.mkdirSync)(n),this.unpack(e,n,!0).then((()=>t(null)))}catch{i()}}))}class A{static extNames={epf:"Editor params file",pak:"Pakage file",xml:"XML file"};static alert=e=>{const{dialogType:t="sync",title:i,message:s,buttons:o=["OK"],noLink:a=!1,type:E="info"}=e,l={icon:n.nativeImage.createFromPath(r.icon),title:i,message:s,buttons:o,noLink:a,type:E};return"sync"===t?n.dialog.showMessageBoxSync(l):n.dialog.showMessageBox(l)};static getEPF=()=>this.openDialog({extention:"epf"});static saveEPF=e=>this.openDialog({type:"save",defaultPath:e,extention:"epf"});static getInitial=()=>this.openDialog({extention:"pak"});static getDir=()=>this.openDialog({source:"dir"});static getMultiEPF=()=>this.openDialog({properties:["openFile","multiSelections"],extention:"epf"});static getXML=()=>this.openDialog({extention:"xml"});static openDialog=e=>{const{type:t="open",source:i="file",defaultPath:s,extention:o,properties:a=("file"===i?["openFile"]:["openDirectory"])}=e,r={properties:a};if(o&&(r.filters=[{name:this.extNames[o],extensions:[o]}]),"open"===t){const e=n.dialog.showOpenDialogSync(r);if(e instanceof Array)return r.properties.includes("multiSelections")?e:e[0]}else{const e={...s?{defaultPath:s}:{},...r.filters?{filters:r.filters}:{}},t=n.dialog.showSaveDialogSync(e);if(t)return t}}}const N=require("crypto");class m{static config=T.obj;static getHash=e=>(0,o.existsSync)(e)?(0,N.createHash)("sha1").update((0,o.readFileSync)(e)).digest("hex"):"";static saveModHash=(e,t)=>{this.config.sums.mods[e]=this.getHash(t)};static saveInitialHash=()=>{this.config.sums.initial=this.getHash(this.config.paths.initial)}}class f{static show=(e,t)=>new Promise((i=>{if(n.Notification.isSupported()){const s=new n.Notification({title:L.get(e),icon:r.icon,body:L.get(t)});s.show(),s.once("click",i)}}))}class D{static config=T.obj;static save=e=>new Promise((t=>{O.unpackMain().then((()=>{if((0,o.existsSync)(r.backupFolder)||(0,o.mkdirSync)(r.backupFolder),(0,o.existsSync)(r.backupInitial))try{(0,o.unlinkSync)(r.backupInitial)}catch{throw new Error("DELETE_OLD_INITIAL_BACKUP_ERROR")}this.config.buildType===p.prod&&this.copy(),e&&(n.app.relaunch(),n.app.quit()),t(null)}))}));static copy=()=>{try{(0,o.copyFileSync)(this.config.paths.initial,r.backupInitial),f.show("SUCCESS","SUCCESS_BACKUP_SAVE")}catch{throw new Error("SAVE_INITIAL_BACKUP_ERROR")}};static recover=()=>{if((0,o.existsSync)(r.backupInitial)){if((0,o.existsSync)(this.config.paths.initial))try{(0,o.unlinkSync)(this.config.paths.initial)}catch{A.alert({type:"warning",title:L.get("ERROR"),message:L.get("DELETE_CURRENT_INITIAL_BACKUP_ERROR")})}try{(0,o.copyFileSync)(r.backupInitial,this.config.paths.initial),O.unpackMain().then((()=>{m.saveInitialHash(),f.show("SUCCESS","SUCCESS_INITIAL_RESTORE")}))}catch{A.alert({type:"warning",title:L.get("ERROR"),message:L.get("DELETE_CURRENT_INITIAL_BACKUP_ERROR")})}}}}const M=require("https");var P=i.n(M);const U=require("dns");var C=i.n(U);class w{static config=T.obj;static settings=g.obj;static checkAdmin=()=>{try{return(0,o.writeFileSync)(r.config,JSON.stringify(this.config,null,"\t")),!0}catch{const e=texts[h.RU].ADMIN_REQUIRED_MESSAGE,t=texts[h.EN].ADMIN_REQUIRED_MESSAGE,i=texts[h.DE].ADMIN_REQUIRED_MESSAGE;return R.loading.setPercent(0),A.alert({message:`RU: ${e}\n\nEN: ${t}\n\nDE: ${i}`,type:"warning",buttons:["Exit"],title:"Error"}),n.app.quit(),!1}};static checkInitialSum=()=>new Promise((e=>{(0,o.existsSync)((0,s.join)(r.mainTemp,"[media]"))&&m.getHash(this.config.paths.initial)===this.config.sums.initial?e(null):(m.saveInitialHash(),(0,o.existsSync)(r.backupInitial)?O.unpackMain(!0).then(e):D.save().then(e))}));static checkPathToDelete=(e,t)=>{const i=[],n=(0,o.readdirSync)(e);for(const a of n){const n=(0,s.join)(e,a);if((0,o.lstatSync)(n).isDirectory()){const e=this.checkPathToDelete(n,t);e&&i.push(...e)}else t[n.replace((0,s.join)(r.root,"/"),"")]||i.push(n)}return i};static checkExportedConfig=()=>new Promise(((e,t)=>{if((0,o.existsSync)((0,s.join)(r.backupFolder,"config.json"))){const t=JSON.parse((0,o.readFileSync)(`${r.backupFolder}\\config.json`).toString());t.version=this.config.version,this.settings.saveWhenReload=!1,t.version<"v0.6.5"&&(t.ADV={},t.ETR={}),(0,o.writeFileSync)(r.config,JSON.stringify(t)),(0,o.rmSync)(`${r.backupFolder}\\config.json`),O.unpack(t.paths.initial,r.mainTemp).then(e)}else t()}));static checkMap=e=>{const t=this.checkPathToDelete(r.root,e),i=[];for(const n in e){const a=(0,s.join)(r.root,n);if((0,o.existsSync)(a)){if((0,o.lstatSync)(a).isDirectory()){t.push(a),i.push(n);continue}m.getHash(a)!==e[n]&&i.push(n)}else i.push(n)}return[t,i]};static checkUpdate=e=>{(this.config.settings.updates||e)&&C().resolve("github.com",(e=>{e||P().get(r.publicInfo,(e=>{e.setEncoding("utf-8");let t="";e.on("data",(e=>{t+=e})),e.on("end",(()=>{const e=JSON.parse(t);this.config.version<e.latestVersion&&(this.config.version>=e.minVersion?R.openUpdateWindow(e.latestVersion):f.show("NOTIFICATION","ALLOW_NEW_VERSION").then((()=>{n.shell.openExternal(r.downloadPage)})))}))}))}))};static checkPaths=()=>{let e=!0;return(0,o.existsSync)(this.config.paths.initial)?(0,o.existsSync)(r.classes)?this.config.settings.DLC&&!(0,o.existsSync)(r.dlc)&&(A.alert({type:"warning",title:L.get("ERROR"),message:L.get("DLC_FOLDER_NOT_FOUND")}),this.config.settings.DLC=!1):(A.alert({type:"warning",title:L.get("ERROR"),message:L.get("CLASSES_NOT_FOUND")}),e=!1):(A.alert({type:"warning",title:L.get("ERROR"),message:L.get("INITIAL_NOT_FOUND")}),e=!1),e};static checkPermissions=e=>{try{return(0,o.writeFileSync)(e,(0,o.readFileSync)(e)),!0}catch{return!1}}}class y{static settings=g.obj;static join=()=>{const e=A.getMultiEPF();if(e&&e.length>1){const t=[],i=[];for(const n of e){const e=JSON.parse((0,o.readFileSync)(n).toString());if(e instanceof Array)for(const n of e)i.includes(n.fileName)||(t.push(n),i.push(n.fileName));else i.includes(e.fileName)||(t.push(e),i.push(e.fileName))}const n=A.saveEPF("joined");n&&((0,o.writeFileSync)(n,JSON.stringify(t,null,"\t")),A.alert({title:this.settings.appId,message:`${L.get("SUCCESS_JOIN")}\n- ${e.map((e=>(0,s.basename)(e))).join("\n- ")}`}))}};static see=()=>{const e=A.getEPF();if(!e)return;const t=JSON.parse((0,o.readFileSync)(e).toString()),i=[],n=e=>{const t=e.fileName;if(e.deps){const i=[];for(const t in e.deps)for(const n in e.deps[t])i.push(n);return`${t}:\n- ${i.join("\n- ")}`}return t};if(t instanceof Array)for(const e of t)i.push(n(e));else i.push(n(t));A.alert({title:this.settings.appId,message:`${L.get("SEE_EXPORTED_MESSAGE")}\n${i.join("\n\n")}`})}}const k={properties:[],functions:[]};n.ipcMain.on("getInfo",(e=>{e.returnValue=k}));class F{static setPublicFuncs=e=>{for(const t in e)"function"==typeof e[t]&&(k.functions.push(t),n.ipcMain.on(`function_${t}_call`,((i,...n)=>{try{const s=e[t](...n);i.returnValue={value:s}}catch(e){i.returnValue={error:e}}})))};static setPubicProps=e=>{for(const t in e){const i=e[t];if(k.properties.push(t),i instanceof Array&&i.length>0){const e=i[0],s=i[1];"function"==typeof e&&n.ipcMain.on(`property_${t}_get`,(t=>{try{const i=e();t.returnValue={value:i}}catch(e){t.returnValue={error:e}}})),"function"==typeof s&&n.ipcMain.on(`property_${t}_set`,((e,...t)=>{try{const i=s(t[0]);e.returnValue={value:i}}catch(t){e.returnValue={error:t}}}))}else"function"==typeof i&&n.ipcMain.on(`property_${t}_get`,(e=>{try{const t=i();e.returnValue={value:t}}catch(t){e.returnValue={error:t}}}))}}}class b{static config=T.obj;static get=()=>[{label:L.get("FILE_MENU_LABEL"),submenu:[...this.ifHasInitial([{label:L.get("SETTINGS_MENU_ITEM_LABEL"),role:d.openSettings},{role:d.separator}]),...this.ifDevBuild(this.ifHasInitial([{label:L.get("RESET_MENU_ITEM_LABEL"),role:d.resetConfig}])),...this.ifDevBuild([{label:"DevTools",role:d.devTools},{label:"Reload",role:d.reload}]),{label:L.get("EXIT_MENU_ITEM_LABEL"),role:d.quitApp}]},...this.ifHasInitial([{label:L.get("BACKUP_MENU_LABEL"),submenu:[{label:L.get("OPEN_BUTTON"),role:d.showFolder,path:r.backupFolder},{role:d.separator},{label:L.get("SAVE_BUTTON"),role:d.saveBackup},{label:L.get("RESTORE_MENU_ITEM_LABEL"),role:d.recoverFromBackup}]}]),...this.ifHasInitial([{label:L.get("EPF_MENU_LABEL"),submenu:[{label:L.get("JOIN_EXPORTED_FILES"),role:d.joinEPF},{label:L.get("SEE_EXPORTED_FILE"),role:d.seeEPF}]}]),{label:L.get("HELP_MENU_LABEL"),submenu:[{label:L.get("HOW_TO_USE_TITLE"),role:d.openURL,url:"https://snowrunner.mod.io/guides/snowrunner-xml-editor"},{label:"GitHub",role:d.openURL,url:"https://github.com/VerZsuT/SnowRunner-XML-Editor-Desktop"},{label:"YouTube(RU)",role:d.openURL,url:"https://youtube.com/playlist?list=PLDwd4yUwzS2VtWCpC9X6MXm47Kv_s_mq2"}]}];static ifHasInitial=e=>this.config.paths.initial?e:[];static ifDevBuild=e=>this.config.buildType===p.dev?e:[]}class B{static settings=g.obj;static download=(e,t)=>{if(e.array){e.isRoot&&e.loadingPage.setCount(e.array.length);const{url:i,path:n}=e.array[0];return e.loadingPage.setText((0,s.basename)(n)),void this.download({url:i,path:n,loadingPage:e.loadingPage},(()=>{t(),e.array.length>1&&this.download({array:e.array.slice(1),loadingPage:e.loadingPage},t)}))}P().get(e.url,(i=>{if(e.inMemory){let n="";i.on("data",(e=>{n+=e})),i.on("end",(()=>{e.fromJSON?t(JSON.parse(n)):t(n)}))}else{const n=(0,o.createWriteStream)(e.path);if(e.loadingPage){const t=parseInt(i.headers["content-length"],10);let n=0;i.on("data",(i=>{n+=i.length,e.loadingPage.setPercent((n/t*100).toFixed(2))}))}i.pipe(n),i.on("end",(()=>{e.loadingPage.success(),n.on("close",t),n.close()}))}}))};static update=()=>{const e=R.openLoading();let t=!1;e.once("show",(()=>{e.download()})),c(),this.download({url:r.updateMap,fromJSON:!0,inMemory:!0},(i=>{let[a,E]=w.checkMap(i);for(const e of a)(0,o.lstatSync)(e).isFile()?(0,o.unlinkSync)(e):(0,o.rmSync)(e,{recursive:!0});0===E.length&&(this.settings.saveWhenReload=!1,T.export(),n.app.relaunch(),n.app.quit());const l=[];for(const e of E){const t=(0,s.join)(r.root,e),i=`${r.updateFiles}/${e.replaceAll("\\","/").replace(".webpack","webpack")}`;(0,o.existsSync)((0,s.dirname)(t))||_(t),l.push({url:i,path:t})}this.download({array:l,loadingPage:e,isRoot:!0},(()=>{E=E.slice(1),0===E.length&&!1===t&&(this.settings.saveWhenReload=!1,t=!0,T.export(),n.app.relaunch(),n.app.quit())}))}))}}const v=T.obj,G={appId:"SnowRunner XML editor",saveWhenReload:!0,devTools:!1};let x;function W(){n.app.relaunch(),n.app.quit()}g.obj=G,n.app.disableHardwareAcceleration(),n.app.setAppUserModelId(G.appId),n.app.whenReady().then((function(){F.setPubicProps({invalidMods:()=>x,texts:()=>L.obj,menu:()=>b.get(),paths:()=>r,config:[()=>v,e=>{v[e.key]=e.value}]}),F.setPublicFuncs({updateFiles:e=>{if(e)try{O.update((0,s.join)(r.modsTemp,e),v.modsList[e].path),m.saveModHash(e,v.modsList[e].path)}catch(e){A.alert({title:L.get("ERROR"),message:L.get("SAVE_MOD_ERROR")})}else try{O.update(r.mainTemp,v.paths.initial),m.saveInitialHash()}catch(e){A.alert({title:L.get("ERROR"),message:L.get("SAVE_ORIGINAL_ERROR")})}},readFile:(e,t)=>{if((0,o.existsSync)(e))return(0,o.readFileSync)(e).toString();if((0,o.existsSync)(t))return(0,o.readFileSync)(t).toString();throw new Error("READ_FILE_ERROR")},writeFile:(e,t)=>{try{(0,o.writeFileSync)(e,t)}catch{throw new Error("WRITE_FILE_ERROR")}},alert:e=>{A.alert({message:e,title:G.appId,type:"async"})},alertSync:e=>{A.alert({message:e,title:G.appId})},confirm:e=>0===A.alert({message:e,title:G.appId,buttons:["OK",L.get("CLOSE")],noLink:!0}),joinEPF:y.join,seeEPF:y.see,importConfig:w.checkExportedConfig,exportConfig:T.export,reload:W,quit:n.app.quit,openLink:e=>{n.shell.openExternal(e)},openPath:e=>{n.shell.openPath(e)},openEditor:e=>{R.openEditor(e)},openList:R.openList,openSettings:R.openSettings,openConsole:R.openConsole,openDialog:A.getDir,openXMLDialog:A.getXML,openInitialDialog:A.getInitial,openEPFDialog:A.getEPF,openSaveDialog:A.saveEPF,saveBackup:e=>{D.save(e)},copyBackup:D.copy,resetConfig:T.reset,recoverFromBackup:D.recover,saveConfig:T.save,saveInitialHash:m.saveInitialHash,checkUpdate:w.checkUpdate,update:B.update,unpackFiles:O.unpackMain,setDevMode:e=>{v.settings.devMode=e,W()},enableDevTools:()=>G.devTools=!0,disableDevTools:()=>G.devTools=!1,toggleDevTools:()=>{R.currentWindow.webContents.toggleDevTools()}}),R.loading=R.openLoading(!0),R.loading.once("show",(()=>{R.loading.setText(L.get("LOADING")),w.checkAdmin()&&(v.paths.initial?w.checkPaths()?w.checkInitialSum().then((()=>{L.addIngame().then((()=>{v.paths.dlc=r.dlc,v.paths.classes=r.classes,v.paths.mods=r.modsTemp,v.settings.DLC&&(v.dlcList=l(r.dlc,!0)),new Promise(((e,t)=>{if(!v.settings.mods)return void t();if(0===v.modsList.length)return void t();let i=v.modsList.length;function n(e){e=e.replace(".pak",""),delete v.modsList[e],delete v.sums.mods[e],v.modsList.length--,i--}for(const t in v.modsList){const a=v.modsList[t];if("number"==typeof a)continue;if(!(0,o.existsSync)(a.path)){x={name:v.modsList[t].name,error:"NOT_EXISTS"},n(v.modsList[t].name);continue}if(!w.checkPermissions(a.path)){x={name:v.modsList[t].name,error:"NO_PERMISSION"},n(v.modsList[t].name);continue}const E=m.getHash(a.path);(0,o.existsSync)((0,s.join)(r.modsTemp,t))&&E===v.sums.mods[t]?i--:O.unpackMod(a.path).then((()=>{(0,o.existsSync)((0,s.join)(r.modsTemp,t,"classes"))?(v.sums.mods[t]=E,i--):(x={name:v.modsList[t].name,error:"NO_CLASSES"},n(v.modsList[t].name)),0===i&&e(null)}))}i<=0&&e(null)})).then((()=>{L.addFromMods().then((()=>{R.openCategories().then((()=>w.checkUpdate()))}))}),(()=>{R.openCategories().then((()=>w.checkUpdate()))}))}))})):T.reset():w.checkExportedConfig().then((()=>{W()}),(()=>{R.openSetup(),w.checkUpdate()})))}))})),n.app.on("before-quit",(()=>{G.saveWhenReload&&T.save()})),process.once("uncaughtExceptionMonitor",n.app.quit)})(0,t,e),module.exports=t})();