(()=>{"use strict";"undefined"!=typeof __webpack_require__&&(__webpack_require__.ab=__dirname+"/native_modules/");const e=require("electron"),r=require("fs"),n=require("path");var o,t,i;function s(e,r){console.error(`Error on ${r}.\n${e}`.replace("Error: ",""))}!function(e){e.get="get",e.set="set"}(o||(o={})),function(e){e.renderer="renderer",e.preload="preload"}(t||(t={})),function(e){e.getPublicInfo="GET_PUBLIC_INFO",e.functionCall="FUNCTION_CALL_",e.propertyGet="PROPERTY_GET_",e.propertySet="PROPERTY_SET_",e.promisePostfix="_PROMISE"}(i||(i={}));const c=e.ipcRenderer.sendSync(i.getPublicInfo);if(!c)throw new Error("Public methods from main is not provided");!function(e){const{info:r,scope:n,getVariable:i,setVariable:c,callFunction:d,waitPromise:a}=e,p={as:()=>l};r.functions.forEach((e=>{r.scopes[e].has(n)&&Object.defineProperty(p,e,{get:()=>(...r)=>{const n=d(e,...r);if(!n.error)return n.promiseChannel?a(n.promiseChannel):n.value;s(n.error,e)},set(){throw new Error(`Function '${e}' is readonly`)},enumerable:!0})})),r.properties.forEach((e=>{if(!r.scopes[e].has(n))return;let t=()=>{const r=i(e);if(!r.error)return r.value;s(r.error,e)},d=r=>{const n=c(e,r);n?.error&&s(n.error,e)};r.accesses[e].has(o.get)||(t=()=>{throw new Error(`No access to getting the '${e}' property`)}),r.accesses[e].has(o.set)||(d=()=>{throw new Error(`No access to setting the '${e}' property`)}),Object.defineProperty(p,e,{get:t,set:d,enumerable:!0})}));const l=new Proxy(p,{get(e,n){if(n in e)return e[n];const i=r.functions.has(n),s=r.properties.has(n);if(!i&&!s)throw new Error(`'${n}' is not provided from main`);if(!r.scopes[n].has(t.renderer))throw new Error(`'${n}' is not provided into renderer scope`);if(s&&!r.accesses[n].has(o.get))throw new Error(`No access to getting the '${n}' property`);throw new Error(`Unknown error on get '${n}'`)},set(e,n,i){if(n in e)return e[n]=i,!0;const s=r.functions.has(n),c=r.properties.has(n);if(s)throw new Error(`Function '${n}' is readonly`);if(!c)throw new Error(`Property '${n}' is not provided from main`);if(!r.scopes[n].has(t.renderer))throw new Error(`'${n}' is not provided into renderer scope`);if(!r.accesses[n].has(o.set))throw new Error(`No access to setting the '${n}' property`);throw new Error(`Unknown error on set '${n}'`)},ownKeys:e=>Object.keys(e),has:(e,r)=>r in e})}({info:c,scope:t.preload,callFunction:(r,...n)=>e.ipcRenderer.sendSync(i.functionCall+r,...n),getVariable:r=>e.ipcRenderer.sendSync(i.propertyGet+r),setVariable:(r,n)=>e.ipcRenderer.sendSync(i.propertySet+r,n),waitPromise:r=>new Promise(((n,o)=>{e.ipcRenderer.once(r,((e,r)=>{r.error?o(r.error):n(r.value)}))}))});const d=e.ipcRenderer.sendSync(i.getPublicInfo),a=new class{constructor(){this.init()}register(e){window.ipc=e,this.init()}init(){const e=window.ipc;for(const r in e)this[r]=e[r]}};var p,l,w,u,f,h,y,g,m,v,S,E,_,b;!function(e){e.dev="dev",e.prod="prod"}(p||(p={})),function(e){e.trucks="trucks",e.trailers="trailers"}(l||(l={})),function(e){e.sync="sync",e.async="async"}(w||(w={})),function(e){e.file="file",e.dir="dir"}(u||(u={})),function(e){e.open="open",e.save="save"}(f||(f={})),function(e){e.engines="engines",e.gearboxes="gearboxes",e.suspensions="suspensions",e.wheels="wheels",e.winches="winches",e.truck="truck"}(h||(h={})),function(e){e.main="main",e.dlc="dlc",e.mods="mods",e.favorites="favorites"}(y||(y={})),function(e){e.text="text",e.number="number",e.select="select",e.coordinates="coordinates",e.file="file"}(g||(g={})),function(e){e.changeConfig="change-config",e.windowReady="window-ready-",e.windowResize="window-resize",e.handleWindowSize="handle-window-size"}(m||(m={})),function(e){e.RU="RU",e.EN="EN",e.DE="DE",e.CH="CH"}(v||(v={})),function(e){e.integer="int",e.float="float"}(S||(S={})),function(e){e.editor="editor",e.lists="lists"}(E||(E={})),function(e){e.input="input",e.group="group"}(_||(_={})),function(e){e.common="common",e.lists="lists",e.editor="editor"}(b||(b={}));const P=b;var R,$,I;!function(e){e.Main="MainWindow",e.Settings="SettingsWindow",e.Update="UpdateWindow",e.WhatsNew="WhatsNewWindow",e.Loading="LoadingWindow",e.Setup="SetupWindow"}(R||(R={})),function(e){e.mods="mods",e.dlc="dlc",e.main="main",e.favorites="favorites"}($||($={})),function(e){e.multiply="multiply",e.single="single"}(I||(I={})),new class{register(e,r=P.common){window.preloads||(window.preloads={}),window.preloads[r]&&console.warn(`Overwriting preload (type='${r}')`),window.preloads[r]=e}get(e=P.common){if(!window.preloads)throw new Error("Preloads not defined");const r=window.preloads[e];if(!r)throw new Error(`Preload not found (type='${e}')`);return r}},new class{pop(e){const r=this.get(e);return localStorage.removeItem(e),r}get(e){const r=localStorage.getItem(e);switch(r){case"null":return null;case"undefined":return;default:return r}}set(e,r){localStorage.setItem(e,r)}};const C=new class{constructor(){this.init()}register(e){window.service=e,this.init()}init(){const e=window.service;for(const r in e)this[r]=e[r]}};!function(r=!0){const n={getInfo:()=>d,waitPromise(r,n,o){e.ipcRenderer.once(r,((e,r)=>{r.error?o?.(r.error):n(r.value)}))},provided:{properties:{},functions:{}}};d.functions.forEach((r=>{Object.defineProperty(n.provided.functions,r,{value:(...n)=>e.ipcRenderer.sendSync(i.functionCall+r,...n),enumerable:!0})})),d.properties.forEach((r=>{Object.defineProperty(n.provided.properties,r,{get:()=>e.ipcRenderer.sendSync(i.propertyGet+r),set(n){e.ipcRenderer.sendSync(i.propertySet+r,n)},enumerable:!0})})),r?e.contextBridge.exposeInMainWorld("__provider__",n):window.__provider__=n}(!1),new class{constructor(){this.addIPC(),this.addSystem()}addIPC(){a.register({sendSync:(r,...n)=>e.ipcRenderer.sendSync(r,...n),send(r,...n){e.ipcRenderer.send(r,...n)},on(r,n){e.ipcRenderer.on(r,n)},once(r,n){e.ipcRenderer.once(r,n)},remove(r,n){e.ipcRenderer.removeListener(r,n)},removeAll(r){e.ipcRenderer.removeAllListeners(r)}})}addSystem(){C.register({readFileSync:e=>(0,r.readFileSync)(e).toString(),isDirectory:e=>(0,r.lstatSync)(e).isDirectory(),writeFileSync:r.writeFileSync,readdirSync:r.readdirSync,existsSync:r.existsSync,basename:n.basename,join:n.join})}}})();