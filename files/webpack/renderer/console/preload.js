(()=>{"use strict";const e=require("electron"),r=require("fs"),n=require("path"),i={on:(r,n)=>e.ipcRenderer.on(r,n),send:(r,...n)=>e.ipcRenderer.send(r,...n),sendSync:(r,...n)=>e.ipcRenderer.sendSync(r,...n)};e.contextBridge.exposeInMainWorld("ipc",i),global.ipc=i;const o={join:n.join,basename:n.basename,existsSync:r.existsSync,readFileSync:e=>(0,r.readFileSync)(e).toString(),writeFileSync:r.writeFileSync,isDirectory:e=>(0,r.lstatSync)(e).isDirectory(),readdirSync:r.readdirSync};let t;e.contextBridge.exposeInMainWorld("service",o),global.service=o,t=window.ipc?window.ipc.sendSync:global.ipc.sendSync;const c=t("getInfo"),s=e=>{window.errorHandler?window.errorHandler(e.message):t("function_alertSync_call",`${e}`.replace("Error: ",""))},l=new Proxy({},{get:(e,r)=>{if(c.properties.includes(r)){const e=t(`property_${r}_get`);return e.error?(s(e.error),null):e.value}if(c.functions.includes(r))return(...e)=>{const n=t(`function_${r}_call`,...e);return n.error?(s(n.error),null):n.value}},set:(e,r,n)=>{if(c.properties.includes(r)){const e=t(`property_${r}_set`,n);return!e.error||(s(e.error),!1)}return!1}}),{openInitialDialog:a}=l,d={replacePars:e=>e?(e.startsWith('"')&&(e=e.slice(1)),e.endsWith('"')&&(e=e.slice(0,-1)),e):e,getModPak:()=>{const e=a();if(e)return{id:(0,n.basename)(e,".pak"),path:e,name:(0,n.basename)(e)}},removeDir:e=>{(0,r.rmSync)(e,{recursive:!0})}};e.contextBridge.exposeInMainWorld("consolePreload",d)})();