(()=>{"use strict";const e=require("electron"),r=require("fs"),n=require("path"),i={on:(r,n)=>e.ipcRenderer.on(r,n),send:(r,...n)=>e.ipcRenderer.send(r,...n),sendSync:(r,...n)=>e.ipcRenderer.sendSync(r,...n)};e.contextBridge.exposeInMainWorld("ipc",i),global.ipc=i;const o={join:n.join,basename:n.basename,existsSync:r.existsSync,readFileSync:e=>(0,r.readFileSync)(e).toString(),writeFileSync:r.writeFileSync,isDirectory:e=>(0,r.lstatSync)(e).isDirectory(),readdirSync:r.readdirSync};let c;e.contextBridge.exposeInMainWorld("service",o),global.service=o,c=window.ipc?window.ipc.sendSync:global.ipc.sendSync;const t=c("getInfo"),s=e=>{window.errorHandler?window.errorHandler(e.message):c("function_alertSync_call",`${e}`.replace("Error: ",""))},l=new Proxy({},{get:(e,r)=>{if(t.properties.includes(r)){const e=c(`property_${r}_get`);return e.error?(s(e.error),null):e.value}if(t.functions.includes(r))return(...e)=>{const n=c(`function_${r}_call`,...e);return n.error?(s(n.error),null):n.value}},set:(e,r,n)=>{if(t.properties.includes(r)){const e=c(`property_${r}_set`,n);return!e.error||(s(e.error),!1)}return!1}}),{paths:d}=l,a={findFromDLC:(e,i)=>{for(const o of(0,r.readdirSync)(d.dlc)){const c=(0,n.join)(d.dlc,o,"classes",i,`${e}.xml`);if((0,r.existsSync)(c))return c}},watchFile:(e,n)=>(0,r.watchFile)(e,{persistent:!1},n)};e.contextBridge.exposeInMainWorld("editorPreload",a)})();